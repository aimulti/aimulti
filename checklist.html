<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë§ˆì¼€íŒ… 30ì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸</title>
<style>
  /* ëª¨ë“  ìš”ì†Œì— box-sizing ì ìš© */
  * {
    box-sizing: border-box;
  }

  /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
body {
  margin: 0;
  font-family: 'Segoe UI', Arial, sans-serif;
  background: #f4f7fa;
  padding-top: 112px; /* íƒ€ì´í‹€(56px) + í”„ë¡œê·¸ë ˆìŠ¤ë°”(56px) */
}

#header-title-fixed {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: white;
  z-index: 9999;
  border-bottom: 1px solid #e5e7eb;
  box-shadow: 0 2px 6px rgba(0,0,0,0.04);
  text-align: center;
  padding: 14px 0 8px 0;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
#header-title-fixed h1 {
  font-size: 1.7em;
  color: #2c3e50;
  margin: 0 0 0 24px;
  font-weight: bold;
  letter-spacing: 0.02em;
  display: block;
  opacity: 1;
}
.download-btn {
  background: none !important;
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
  color: #10b981;
  width: auto;
  height: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.7em;
  cursor: pointer;
  padding: 0 4px;
  border-radius: 0 !important;
  transition: color 0.2s;
}
.download-btn:hover {
  color: #059669;
  background: none !important;
  border: none !important;
  box-shadow: none !important;
}

#share-buttons {
  Display: flex;
  Gap: 7px;
  Margin-right: 18px;
}

.share-btn {
background: none !important;
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
  color: #10b981;
  width: auto;
  height: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.7em;
  cursor: pointer;
  padding: 0 4px;
  border-radius: 0 !important;
}
.share-btn:hover {
  background: none !important;
  color: #059669;
  border: none !important;
  box-shadow: none !important;
}
#progress-container {
  position: fixed;
  top: 56px;
  left: 0;
  width: 100%;
  background-color: white;
  color: #2d6a4f;
  font-weight: bold;
  font-size: 1.1em;
  padding: 10px 16px 10px 16px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  z-index: 9998;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid #e5e7eb;
  height: 56px;
}
#progress-text {
  flex: 0 0 auto;
}
#progress-bar-bg {
  flex: 1 1 auto;
  background-color: #d1fae5;
  border-radius: 12px;
  height: 18px;
  margin-left: 15px;
  overflow: hidden;
  box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
}
#progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #34d399, #059669);
  width: 0%;
  transition: width 0.3s ease;
  border-radius: 12px 0 0 12px;
}



  /* ì˜¤ë¥¸ìª½ í•˜ë‹¨ ê³ ì • ì›í˜• ì „ì²´ ì§„í–‰ë¥  */
  #circular-progress {
    position: relative;
    bottom: 20px;
    right: 20px;
    width: 100px; /* í¬ê¸° ì¦ê°€ */
    height: 100px; /* í¬ê¸° ì¦ê°€ */
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border-radius: 50%;
    box-shadow: 0 0 10px rgba(16,185,129,0.4);
    pointer-events: none;
    transition: none;
  }

#circular-progress-wrapper {
  position: fixed;
  right: 0px;
  bottom: 0px;
  z-index: 2000;
  width: 100px;
  height: 100px;
  display: block;
  align-items: center;
  justify-content: center;
}

/* ë™ê·¸ë€ ì› */
#circular-progress {
  position: relative;
  width: 100px;
  height: 100px;
  z-index: 1;
}

/* ë§¨ ìœ„ë¡œ ë²„íŠ¼ì„ ì› ìœ„ì— ë„ìš°ê¸° */
#scroll-to-top-btn {
  position: absolute;
  right: -10px;
  /* ì¤‘ì•™ì´ ì•„ë‹ˆë¼, ì›ì˜ ìœ„ìª½ì— ë¶™ì´ê¸°: */
  top: -80px; /* ë²„íŠ¼ í¬ê¸°/ì› í¬ê¸°ì— ë”°ë¼ ì¡°ì •(56px ë²„íŠ¼ì¼ ë•Œ -28pxì´ ìœ„ì— ë”± ë¶™ìŒ) */
  transform: translate(-50%, 0);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, #34d399 60%, #059669 100%);
  color: white;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(16,185,129,0.35);
  cursor: pointer;
  z-index: 2;
  transition: background 0.2s, box-shadow 0.2s, opacity 0.3s;
  font-size: 1.5em;
  opacity: 0.93;
  pointer-events: auto;
  overflow: hidden;
}

#scroll-to-top-btn .material-icons {
  font-size: 2em;
  display: block;
  margin: 0;
  line-height: 1;
  width: 1em;
  height: 1em;
  text-align: center;
  vertical-align: middle;
}

#scroll-to-top-btn.hide {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
}
#scroll-to-top-btn:hover {
  background: linear-gradient(135deg, #059669 60%, #34d399 100%);
  box-shadow: 0 8px 18px rgba(16,185,129,0.48);
  opacity: 1;
}

/* ëª¨ë°”ì¼ ëŒ€ì‘ */
@media (max-width: 768px) {
  #circular-progress-wrapper {
    right: 0px;
    bottom: 110px;
    width: 70px;
    height: 70px;
  }
  #circular-progress {
    width: 70px;
    height: 70px;
  }
  #circular-progress svg {
    width: 70px;
    height: 70px;
  }
  #scroll-to-top-btn {
    width: 30px;
    height: 30px;
    font-size: 1.1em;
    top: -70px; /* ëª¨ë°”ì¼ì—ì„œ ë²„íŠ¼ì´ ì› ìœ„ì— ì˜ ë¶™ë„ë¡ ì¡°ì • */
    Right: 0px;
  }
}

  .circular-svg {
    width: 100%; /* ë¶€ëª¨ divì— ë§ì¶° ì¡°ì ˆ */
    height: 100; /* ë¶€ëª¨ divì— ë§ì¶° ì¡°ì ˆ */
    Display: block;
  }
  .circular-bg {
    stroke: #ffffff;
    stroke-width: 10; /* ì„  êµµê¸° ì¦ê°€ */
    fill: none;
  }
  .circular-fg {
    stroke: url(#circular-gradient);
    stroke-width: 10; /* ì„  êµµê¸° ì¦ê°€ */
    /* stroke-linecap: round;  <-- ì´ ë¶€ë¶„ì„ ì œê±°í•©ë‹ˆë‹¤. */
    transition: stroke-dashoffset 0.5s cubic-bezier(.4,2,.6,1);
    transform: rotate(-90deg);
    transform-origin: 50% 50%; /* ì¤‘ì•™ ê¸°ì¤€ìœ¼ë¡œ íšŒì „ */
    fill: none;
  }
  .circular-text {
    font-size: 1.8em; /* ê¸€ì”¨ í¬ê¸° ì¦ê°€ */
    fill: #10b981;
    font-weight: bold;
    font-family: 'Arial', sans-serif;
    pointer-events: none;
    user-select: none;
    /* SVG ë‚´ë¶€ í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
    dominant-baseline: middle;
    alignment-baseline: middle;
    text-anchor: middle;
  }
  .circular-label {
    font-size: 1.2em; /* ê¸€ì”¨ í¬ê¸° ì¦ê°€ */
    fill: #10b981;
    font-family: 'Arial', sans-serif;
    font-weight: bold;
    pointer-events: none;
    user-select: none;
    /* SVG ë‚´ë¶€ í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
    dominant-baseline: middle;
    alignment-baseline: middle;
    text-anchor: middle;
  }
  h1 { display: none; } /* í˜ì´ì§€ ì œëª©ì€ ê³ ì • í—¤ë”ì—ë§Œ í‘œì‹œ */

  /* ì²´í¬ë¦¬ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ - ê°€ë¡œ ìŠ¤í¬ë¡¤ ë° ë“œë˜ê·¸ */
  #checklist-wrapper {
    position: relative; /* í™”ì‚´í‘œ ë²„íŠ¼ ìœ„ì¹˜ ì§€ì •ì„ ìœ„í•´ ì¶”ê°€ */
    padding-bottom: 20px; /* ìŠ¤í¬ë¡¤ë°” ê³µê°„ í™•ë³´ */
  }

  #checklist {
    display: flex; /* í”Œë ‰ìŠ¤ ë°•ìŠ¤ */
    overflow-x: auto; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥ */
    scroll-snap-type: x mandatory; /* ì¹´ë“œ ìŠ¤ëƒ… íš¨ê³¼ */
    -webkit-overflow-scrolling: touch; /* iOS ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ */
    scrollbar-width: thin; /* Firefox ìŠ¤í¬ë¡¤ë°” */
    scrollbar-color: #34d399 #e5e7eb; /* Firefox ìŠ¤í¬ë¡¤ë°” ìƒ‰ìƒ */
    cursor: grab; /* ë“œë˜ê·¸ ê°€ëŠ¥í•œ ì»¤ì„œ */
  }
  #checklist.grabbing {
    cursor: grabbing; /* ë“œë˜ê·¸ ì¤‘ ì»¤ì„œ */
  }
  #checklist::-webkit-scrollbar {
    height: 8px;
  }
  #checklist::-webkit-scrollbar-track {
    background: #e5e7eb;
    border-radius: 10px;
  }
  #checklist::-webkit-scrollbar-thumb {
    background: #34d399;
    border-radius: 10px;
  }
  #checklist::-webkit-scrollbar-thumb:hover {
    background: #059669;
  }

  /* ì¹´í…Œê³ ë¦¬ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
  .category-box {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    margin-right: 20px; /* ì¹´ë“œ ê°„ ê°„ê²© */
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    border: 1px solid #e0e0e0;
    min-width: 320px; /* PC ê¸°ë³¸ ì¹´ë“œ ë„ˆë¹„ */
    flex: 0 0 auto; /* í”Œë ‰ìŠ¤ ì•„ì´í…œì´ ì¶•ì†Œë˜ì§€ ì•Šë„ë¡ ì„¤ì • */
    scroll-snap-align: start; /* ì¹´ë“œ ì‹œì‘ ì§€ì ì— ìŠ¤ëƒ… */
    max-width: 400px; /* PCì—ì„œ ë„ˆë¬´ ë„“ì–´ì§€ì§€ ì•Šë„ë¡ ìµœëŒ€ ë„ˆë¹„ ì„¤ì • */
  }

  /* ë§ˆì§€ë§‰ ì¹´ë“œ margin-right ì œê±° */
  #checklist > .category-box:last-child {
    margin-right: 0;
  }

  .category-box h2 {
    color: #1a4d2e;
    font-size: 1.6em;
    margin-top: 0;
    margin-bottom: 15px;
    border-bottom: 2px solid #a7d9b5;
    padding-bottom: 8px;
    display: flex;
    align-items: center;
    font-weight: bold;
  }
  .category-box h2 .material-icons { /* Material Icons ìŠ¤íƒ€ì¼ */
    margin-right: 8px;
    color: #2d6a4f;
    font-size: 1.2em;
  }

  .day-section {
    background: #fdfdfd;
    border-radius: 8px;
    padding: 15px 20px;
    margin-bottom: 12px;
    box-shadow: 0 1px 5px rgba(0,0,0,0.05);
    position: relative;
    border: 1px solid #edf2f7;
  }
  .day-section h3 {
    color: #34495e;
    font-size: 1.1em;
    margin-top: 0;
    margin-bottom: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
  }
  .day-progress-text {
    font-size: 0.9em;
    color: #2d6a4f;
    font-weight: 600;
    min-width: 40px;
    text-align: right;
    margin-left: 10px;
  }
  .day-progress-bar-bg {
    width: 100%;
    height: 10px;
    background-color: transparent;
    border: 1.5px solid #d1fae5;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: none;
    margin: 6px 0 10px 0;
  }
  .day-progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #6ee7b7, #10b981);
    width: 0%;
    transition: width 0.3s ease;
    border-radius: 10px 0 0 10px;
  }
  ul {
    padding-left: 20px;
    margin: 0;
  }
  li {
    margin-bottom: 8px;
    font-size: 0.95em;
    transition: all 0.2s ease-in-out;
  }

  /* ì»¤ìŠ¤í…€ ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
  input[type="checkbox"] {
    opacity: 0; /* ê¸°ë³¸ ì²´í¬ë°•ìŠ¤ ìˆ¨ê¸°ê¸° */
    position: absolute;
    z-index: -1; /* ë‹¤ë¥¸ ìš”ì†Œì— ê°€ë ¤ì§€ì§€ ì•Šë„ë¡ */
  }
  input[type="checkbox"] + span::before { /* ì²´í¬ë°•ìŠ¤ ëŒ€ì‹  í‘œì‹œë  ìš”ì†Œ */
    content: '';
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    flex-shrink: 0; /* í¬ê¸° ê³ ì • */
    flex-grow: 0;
    border: 2px solid #ccc;
    border-radius: 4px;
    margin-right: 0.5em;
    vertical-align: middle;
    transition: background-color 0.2s, border-color 0.2s;
    background-color: #f0f0f0;
  }
  input[type="checkbox"]:checked + span::before {
    background-color: #34d399; /* ì²´í¬ ì‹œ ë°°ê²½ìƒ‰ */
    border-color: #34d399; /* ì²´í¬ ì‹œ í…Œë‘ë¦¬ìƒ‰ */
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.207 4.793a1 1 0 011.414 0l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414l3.293 3.293 7.293-7.293a1 1 0 010 1.414z'/%3E%3C/svg%3E"); /* ì²´í¬ ì•„ì´ì½˜ (í°ìƒ‰) */
    background-repeat: no-repeat;
    background-position: center;
    background-size: 80%;
  }
  input[type="checkbox"]:focus + span::before {
    box-shadow: 0 0 0 3px rgba(52, 211, 153, 0.5); /* í¬ì»¤ìŠ¤ ì‹œ ì•„ì›ƒë¼ì¸ */
  }

  label {
    display: flex; /* í…ìŠ¤íŠ¸ì™€ ì²´í¬ë°•ìŠ¤ë¥¼ í•œ ì¤„ì— ì •ë ¬ */
    align-items: center;
    cursor: pointer;
    padding: 2px 0;
  }
  label:hover {
    background-color: #f0f8ff;
    border-radius: 6px;
    padding: 2px 4px;
  }
  .checked {
    text-decoration: line-through;
    color: #aaa;
  }

  /* í™”ì‚´í‘œ ë²„íŠ¼ */
  .scroll-button {
    Flex: none !important;
    Align-self: center !important;
    position: fixed;
    top: 50%;
    transform: translateY(-50%); /* ë²„íŠ¼ ìì²´ë¥¼ ì„¸ë¡œ ì¤‘ì•™ìœ¼ë¡œ ì •ë ¬ */
    background-color: transparent;
    color: #10b981;
    border: 2.5px solid #10b981;
    border-radius: 50% !important;
    width: 36px !important;
    height: 36px !important;
    Min-width: 36px !important;
    Min-height: 36px !important;
    Max-width: 36px !important;
    Max-height: 36px !important;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 1.5em;
    font-weight: bold;
    z-index: 10; /* ê³ ì • í—¤ë”ë³´ë‹¤ ë‚®ì€ z-indexë¡œ ê²¹ì¹˜ì§€ ì•Šë„ë¡ */
    transition: background-color 0.2s, opacity 0.2s;
    opacity: 0.85;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.15);
    Box-sizing: border-box !important;
    Background-clip: border-box;
    Padding: 0 !important;
    Margin: 0 !important;
  }
  .scroll-button:hover {
    background: linear-gradient(135deg, #34d399 60%, #059669 100%);
    Border-color: #059669;
    opacity: 1;
  }
  .scroll-button:hover.left {
  -webkit-text-fill-color: #fff;
  color: #fff;
  background-clip: border-box;
  -webkit-background-clip: border-box;
  background-image: linear-gradient(135deg, #34d399 60%, #059669 100%);
}
  .scroll-button:hover.right {
  -webkit-text-fill-color: #fff;
  color: #fff;
  background-clip: border-box;
  -webkit-background-clip: border-box;
  background-image: linear-gradient(135deg, #34d399 60%, #059669 100%);
}
  .scroll-button.left {
    Background: transparent;
    Background-clip: border-box;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    Background-image: linear-gradient(135deg, #34d399 60%, #059669 100%);
    Color: #10b981;
    left: 10px; /* í™”ë©´ ì¢Œì¸¡ì—ì„œ 10px ë–¨ì–´ì§ */
  }
  .scroll-button.right {
    Background: transparent;
    Background-clip: border-box;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    Background-image: linear-gradient(135deg, #34d399 60%, #059669 100%);
    Color: #10b981;
    right: 10px; /* í™”ë©´ ìš°ì¸¡ì—ì„œ 10px ë–¨ì–´ì§ */
  }
  .scroll-button.hidden {
    display: none; /* í•„ìš” ì—†ì„ ë•Œ ìˆ¨ê¹€ */
  }


  /* í•˜ë‹¨ ë²„íŠ¼ */
  #buttons {
    text-align: center;
    margin: 20px 0 40px 0;
  }
  button {
    display: inline-block;
    margin: 0 10px;
    padding: 10px 20px;
    font-size: 0.9em;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    color: white;
    transition: background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    user-select: none;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  }
  #reset-btn { background-color: #e63946; }
  #reset-btn:hover { background-color: #d62828; box-shadow: 0 4px 8px rgba(230,57,70,0.3); }
  #print-pdf-btn { background-color: #1d3557; }
  #print-pdf-btn:hover { background-color: #16315c; box-shadow: 0 4px 8px rgba(29,53,87,0.3); }
  #show-result-btn { background-color: #38a169; }
  #show-result-btn:hover { background-color: #276749; box-shadow: 0 4px 8px rgba(56,161,105,0.3); }
  #print-result-btn { background-color: #ffb703; color: #22223b; }
  #print-result-btn:hover { background-color: #e09f3e; color: #22223b; box-shadow: 0 4px 8px rgba(255,183,3,0.3); }

  /* ì§„ë‹¨ ê²°ê³¼ ì˜ì—­ */
  #diagnosis-result {
    background: white;
    border-radius: 10px;
    padding: 15px 20px;
    box-shadow: 0 1px 5px rgba(0,0,0,0.1);
    max-width: 900px;
    margin: 0 auto 40px auto;
    position: relative;
    border: 1px solid #e0e0e0;
  }
  #diagnosis-result h3 {
    margin-top: 0;
    color: #2d6a4f;
    font-size: 1.3em;
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
  }
  #diagnosis-result ul {
    max-height: 300px;
    overflow-y: auto;
    padding-left: 20px;
  }
  #diagnosis-result ul li {
    font-size: 0.9em;
    margin-bottom: 8px;
    line-height: 1.4;
  }
  #print-result-btn {
    position: absolute;
    top: 15px;
    right: 20px;
    z-index: 10;
  }

  /* ë¯¸ë””ì–´ ì¿¼ë¦¬: ëª¨ë°”ì¼ ìµœì í™” */
  @media (max-width: 768px) {
    body {
      padding: 10px;
      padding-top: 150px; /* ëª¨ë°”ì¼ í—¤ë” ë†’ì´ ê³ ë ¤ */
    }
   #header-title-fixed {
      display: flex !important;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: white;
      z-index: 9999;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      border-bottom: 1px solid #e5e7eb;
    }
    #header-title-fixed h1 {
      display: block !important; 
      color: #2c3e50 !important;
      Margin-left: 10px;
      Font-size: 1.2em; 
      opacity: 1 !important;
    }
      #share-buttons {
    gap: 3px;
    margin-right: 6px;
  }
  .share-btn {
    width: 28px;
    height: 28px;
    font-size: 1em;
  }
    #progress-container {
      font-size: 0.9em;
      padding: 8px 15px 8px 15px;
      margin-bottom: 15px; /* ëª¨ë°”ì¼ì—ì„œë„ ê°„ê²© ìœ ì§€ */
    }
    /* ëª¨ë°”ì¼ì—ì„œ ì¹´ë“œ í•˜ë‚˜ì”© ë³´ì´ë„ë¡ */
    #checklist-wrapper {
        padding-left: 10px;
        padding-right: 10px;
    }
    .category-box {
      margin-right: 15px;
      min-width: calc(100% - 30px); /* í™”ë©´ ë„ˆë¹„ì— ë§ì¶° ì¹´ë“œ í•˜ë‚˜ì”© ë³´ì´ë„ë¡ (ì¢Œìš° íŒ¨ë”© ë° ìŠ¤í¬ë¡¤ë°” ì˜ì—­) */
      max-width: none; /* ëª¨ë°”ì¼ì—ì„œëŠ” ìµœëŒ€ ë„ˆë¹„ ì œí•œ í•´ì œ */
    }
    .category-box h2 {
      font-size: 1.4em;
      margin-bottom: 12px;
    }
    .day-section {
      padding: 12px 15px;
      margin-bottom: 10px;
    }
    .day-section h3 {
      font-size: 1em;
      margin-bottom: 6px;
    }
    #diagnosis-result {
      max-width: 100%;
    }
    #print-result-btn {
      position: static; /* ëª¨ë°”ì¼ì—ì„œëŠ” ì •ì ìœ¼ë¡œ ë°°ì¹˜ */
      display: block;
      margin: 10px auto 0 auto;
    }
    /* ì›í˜• ì§„í–‰ë¥  í¬ê¸° ë° ê¸€ì”¨ ì¡°ì ˆ (ëª¨ë°”ì¼) */
    #circular-progress {
      width: 80px;
      height: 80px;
      bottom: 15px;
      right: 15px;
    }
    .circular-svg {
      width: 80px;
      height: 80px;
    }
    .circular-fg {
        transform-origin: 50% 50%; /* ì¤‘ì•™ ê¸°ì¤€ìœ¼ë¡œ íšŒì „ */
        stroke-width: 8;
    }
    .circular-bg {
        stroke-width: 8;
    }
    .circular-text { font-size: 1.3em; }
    .circular-label { font-size: 1em; }
    button {
      padding: 8px 15px;
      font-size: 0.85em;
    }
    /* ëª¨ë°”ì¼ì—ì„œ í™”ì‚´í‘œ ë²„íŠ¼ ìœ„ì¹˜ ì¡°ì • */
    .scroll-button {
       .scroll-button {
    width: 28px;
    height: 28px;
    min-width: 28px;
    min-height: 28px;
    max-width: 28px;
    max-height: 28px;
    font-size: 1.1em;
    border-width: 2px;
    }
    #checklist-wrapper .scroll-button.left { left: 5px; }
    #checklist-wrapper .scroll-button.right { right: 5px; }
  }

  /* ì¸ì‡„ ìŠ¤íƒ€ì¼ */
  @media print {
    body {
      background: white;
      color: black;
      padding-top: 0; /* ì¸ì‡„ ì‹œ ìƒë‹¨ íŒ¨ë”© ì œê±° */
    }
    /* ì¸ì‡„ ì‹œ ê³ ì • í—¤ë”, ì§„í–‰ë¥  ë°”, ë²„íŠ¼, ì›í˜• ì§„í–‰ë¥  ìˆ¨ê¹€ */
    #header-title-fixed, #progress-container, #buttons, #circular-progress, h1, .scroll-button {
      display: none !important;
    }
    /* ì¸ì‡„ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì„¸ë¡œë¡œ ì •ë ¬ */
    #checklist-wrapper {
        margin-top: 0 !important;
        padding: 0 !important;
    }
    #checklist {
      display: block !important;
      overflow-x: visible !important; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ ìˆ¨ê¹€ */
      flex-wrap: wrap; /* ë‚´ìš©ì´ ë„˜ì¹˜ë©´ ë‹¤ìŒ ì¤„ë¡œ */
      padding: 0 !important;
      cursor: default; /* ì¸ì‡„ ì‹œ ë“œë˜ê·¸ ì»¤ì„œ ì œê±° */
    }
    .category-box {
      box-shadow: none;
      border-radius: 0;
      border: 1px solid #ccc; /* ì¸ì‡„ ì‹œì—ë„ í…Œë‘ë¦¬ ìœ ì§€ */
      page-break-inside: avoid; /* ë°•ìŠ¤ ì•ˆ ë‚´ìš©ì´ í˜ì´ì§€ë¥¼ ë„˜ì–´ê°€ì§€ ì•Šë„ë¡ */
      margin-right: 0; /* ê°€ë¡œ ê°„ê²© ì œê±° */
      margin-bottom: 10px; /* ì„¸ë¡œ ê°„ê²© ìœ ì§€ */
      min-width: auto !important; /* ìµœì†Œ ë„ˆë¹„ ì œí•œ í•´ì œ */
      max-width: none !important; /* ìµœëŒ€ ë„ˆë¹„ ì œí•œ í•´ì œ */
      width: 100%; /* ì „ì²´ ë„ˆë¹„ ì‚¬ìš© */
    }
    .category-box h2 {
      border-bottom: 1px solid #ccc; /* ì¸ì‡„ ì‹œì—ë„ í…Œë‘ë¦¬ ìœ ì§€ */
      font-size: 1.4em;
    }
    .day-section {
      box-shadow: none;
      border-radius: 0;
      page-break-inside: avoid;
      border: none; /* day-section ë‚´ë¶€ í…Œë‘ë¦¬ ì œê±° */
      padding: 5px 0; /* ë‚´ë¶€ íŒ¨ë”© ì¡°ì ˆ */
    }
    /* ì¸ì‡„ ì‹œ ì²´í¬ë°•ìŠ¤ ë° ë ˆì´ë¸” ìŠ¤íƒ€ì¼ ì¡°ì • */
    input[type="checkbox"] + span::before {
      background-color: #f0f0f0 !important; /* ì¸ì‡„ ì‹œ ë°°ê²½ìƒ‰ ìœ ì§€ */
      border-color: #ccc !important; /* ì¸ì‡„ ì‹œ í…Œë‘ë¦¬ìƒ‰ ìœ ì§€ */
    }
    input[type="checkbox"]:checked + span::before {
      background-color: #34d399 !important; /* ì²´í¬ ì‹œ ë°°ê²½ìƒ‰ */
      border-color: #34d399 !important; /* ì²´í¬ ì‹œ í…Œë‘ë¦¬ìƒ‰ */
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='black' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.207 4.793a1 1 0 011.414 0l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414l3.293 3.293 7.293-7.293a1 1 0 010 1.414z'/%3E%3C/svg%3E"); /* ì²´í¬ ì•„ì´ì½˜ (ê²€ì •ìƒ‰) */
    }
    label:hover {
      transform: none !important;
      background-color: transparent !important;
      padding: 0 !important;
    }
    label {
      cursor: default !important;
    }
    /* ì§„ë‹¨ ê²°ê³¼ë§Œ ì¸ì‡„ ì‹œ ìŠ¤íƒ€ì¼ */
    body.printing-result *:not(#diagnosis-result):not(#diagnosis-result *) {
      display: none !important;
    }
    #diagnosis-result {
      display: block !important;
      position: static !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
      max-width: 100% !important;
      border: none !important;
    }
    #diagnosis-result h3 {
      border-bottom: none !important;
      padding-bottom: 0 !important;
      font-size: 1.2em;
    }
    #print-result-btn {
      display: none !important;
    }


#scroll-to-top-btn {
    position: fixed;
    right: 40px;
    bottom: 135px; /* ì›í˜• ì§„í–‰ë¥ (#circular-progress) ìœ„ì— ì ë‹¹íˆ ìœ„ì¹˜ */
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: linear-gradient(135deg, #34d399 60%, #059669 100%);
    color: white;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(16,185,129,0.35);
    cursor: pointer;
    z-index: 2100;
    transition: background 0.2s, box-shadow 0.2s, opacity 0.3s;
    font-size: 2em;
    opacity: 0.93;
  }
  #scroll-to-top-btn:hover {
    background: linear-gradient(135deg, #059669 60%, #34d399 100%);
    box-shadow: 0 8px 18px rgba(16,185,129,0.48);
    opacity: 1;
  }
  #scroll-to-top-btn.hide {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
  }
  /* ëª¨ë°”ì¼ ìœ„ì¹˜ ì¡°ì • */
  @media (max-width: 768px) {
    #scroll-to-top-btn {
      right: 20px;
      bottom: 100px;
      width: 44px;
      height: 44px;
      font-size: 1.5em;
    }
  }
  }



</style>
<!-- Material Icons (ì•„ì´ì½˜ ì‚¬ìš©ì„ ìœ„í•´ ì¶”ê°€) -->
<script type="text/javascript" nonce="XOJ0BVE+zr3qdJZKBBAaLFbFzesxhK/xP1QmLnOdycs=" src="//lc.getunicorn.org?type=base-script&amp;ri=AAAOawAQY29tLmFwcGxlLlNhZmFyaQAOZmlsZS5ub3Rpb24uc28"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>

<!-- ê³ ì • í—¤ë”: ì œëª© -->
<div id="header-title-fixed">
  <h1>ğŸ“… ë§ˆì¼€íŒ… ì²´í¬ë¦¬ìŠ¤íŠ¸</h1>
  <div id="share-buttons">
 <button class="download-btn" id="btn-download" title="ë‹¤ìš´ë¡œë“œ">
      <span class="material-icons">download</span>
    </button>
    <button class="share-btn" id="btn-webshare" title="ê³µìœ ">
      <span class="material-icons">share</span>
    </button>
    <a class="share-btn" id="btn-kakaotalk" title="ì¹´ì¹´ì˜¤í†¡ ê³µìœ " href="#">
      <span class="material-icons">chat</span>
    </a>
  </div>
</div>

<!-- ì „ì²´ ì§„í–‰ë¥  ë°” (ê³ ì • í•´ì œë¨) -->
<div id="progress-container" aria-label="ì „ì²´ ì§„í–‰ë¥ ">
  <div id="progress-text">ì „ì²´ ì§„í–‰ë¥ : 0%</div>
  <div id="progress-bar-bg" aria-hidden="true">
    <div id="progress-bar-fill"></div>
  </div>
</div>

<!-- ì˜¤ë¥¸ìª½ í•˜ë‹¨ ì›í˜• ì „ì²´ ì§„í–‰ë¥  (SVG) -->
<div id="circular-progress-wrapper">
<div id="circular-progress">
  <svg class="circular-svg" viewBox="0 0 100 100">
  <defs>
    <linearGradient id="circular-gradient" x1="1" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#6ee7b7"/>
      <stop offset="100%" stop-color="#10b981"/>
    </linearGradient>
  </defs>
  <circle class="circular-bg" cx="50" cy="50" r="40"/>
  <circle class="circular-fg" cx="50" cy="50" r="40" style="stroke-linecap: round;"/>
  <text class="circular-text" x="50" y="42" id="circular-progress-value">0%</text>
  <text class="circular-label" x="50" y="62">ì „ì²´</text>
</svg>
</div>

<!-- ë§¨ ìœ„ë¡œ ë²„íŠ¼ (ì›í˜• ì§„í–‰ë¥  ìœ„) -->
<button id="scroll-to-top-btn" title="ë§¨ ìœ„ë¡œ ì´ë™" aria-label="ë§¨ ìœ„ë¡œ">
  <span class="material-icons">arrow_upward</span>
</button>
</div>

<!-- í˜ì´ì§€ ì œëª© (ê³ ì • í—¤ë”ì— í¬í•¨ë˜ë¯€ë¡œ ìˆ¨ê¹€) -->
<h1>ğŸ“… ë§ˆì¼€íŒ… 30ì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸</h1>

<!-- ì²´í¬ë¦¬ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ (ê°€ë¡œ ìŠ¤í¬ë¡¤) ë° í™”ì‚´í‘œ ë²„íŠ¼ì„ í¬í•¨í•˜ëŠ” ë˜í¼ -->
<div id="checklist-wrapper">
    <div id="checklist"></div>
    <button class="scroll-button left" id="scroll-left-btn" aria-label="ì´ì „ ì¹´ë“œ ë³´ê¸°">â€¹</button>
    <button class="scroll-button right" id="scroll-right-btn" aria-label="ë‹¤ìŒ ì¹´ë“œ ë³´ê¸°">â€º</button>
</div>


<!-- í•˜ë‹¨ ë²„íŠ¼ë“¤ -->
<div id="buttons">
  <button id="reset-btn" title="ëª¨ë“  ì²´í¬ í•­ëª© ì´ˆê¸°í™”">ğŸ”„ ì „ì²´ ì²´í¬ ì´ˆê¸°í™”</button>
  <button id="print-pdf-btn" title="ì¸ì‡„ ë° PDF ì €ì¥">ğŸ–¨ï¸ ì¸ì‡„ / PDF ì €ì¥</button>
  <button id="show-result-btn" title="ì§„ë‹¨ ê²°ê³¼ ë³´ê¸°">ğŸ“‹ ì§„ë‹¨ ê²°ê³¼ ë³´ê¸°</button>
</div>

<!-- ì§„ë‹¨ ê²°ê³¼ ì˜ì—­ -->
<div id="diagnosis-result" aria-live="polite" style="display:none;">
  <button id="print-result-btn" style="display:none;">ğŸ–¨ï¸ ì§„ë‹¨ ê²°ê³¼ë§Œ ì¸ì‡„/PDF</button>
  <h3>ğŸ“ ì§„ë‹¨ ê²°ê³¼</h3>
  <p id="summary"></p>
  <ul id="completed-tasks-list"></ul>
</div>


<script>

// ë§¨ ìœ„ë¡œ ë²„íŠ¼ ê¸°ëŠ¥
const scrollToTopBtn = document.getElementById('scroll-to-top-btn');

// ë²„íŠ¼ í´ë¦­ ì‹œ ë§¨ ìœ„ë¡œ ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤
scrollToTopBtn.addEventListener('click', function() {
  window.scrollTo({ top: 0, behavior: 'smooth' });
});

// ìŠ¤í¬ë¡¤ ìœ„ì¹˜ì— ë”°ë¼ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
function handleScrollToTopBtn() {
  if (window.scrollY > window.innerHeight * 0.3) {
    scrollToTopBtn.classList.remove('hide');
  } else {
    scrollToTopBtn.classList.add('hide');
  }
}
window.addEventListener('scroll', handleScrollToTopBtn);
handleScrollToTopBtn();


// ì²´í¬ë¦¬ìŠ¤íŠ¸ ë°ì´í„° (ì¹´í…Œê³ ë¦¬ ì •ë³´ í¬í•¨)
const checklistData = [
  { day: 1, category: "ì „ëµ ìˆ˜ë¦½ ë° ì‹œì¥ ë¶„ì„", tasks: ["ğŸ“Š ì§€ë‚œë‹¬ KPI ë¦¬ë·°", "ğŸ“ ì„±ê³¼ ìš”ì•½ ì •ë¦¬"] },
  { day: 2, category: "ì „ëµ ìˆ˜ë¦½ ë° ì‹œì¥ ë¶„ì„", tasks: ["ğŸ¯ ì´ë‹¬ KPI ë° ëª©í‘œ ì„¤ì •", "ğŸ“ˆ í•µì‹¬ ì§€í‘œ ì„ ì •"] },
  { day: 3, category: "ì „ëµ ìˆ˜ë¦½ ë° ì‹œì¥ ë¶„ì„", tasks: ["ğŸ” ì‹œì¥ íŠ¸ë Œë“œ ì¡°ì‚¬", "ğŸŒ íƒ€ê²Ÿ ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘"] },
  { day: 4, category: "ì „ëµ ìˆ˜ë¦½ ë° ì‹œì¥ ë¶„ì„", tasks: ["ğŸ‘€ ê²½ìŸì‚¬ ë§ˆì¼€íŒ… ì „ëµ ë¶„ì„", "ğŸ“¸ ê´‘ê³  ì˜ˆì‹œ ìˆ˜ì§‘"] },
  { day: 5, category: "ì „ëµ ìˆ˜ë¦½ ë° ì‹œì¥ ë¶„ì„", tasks: ["ğŸ‘¤ í˜ë¥´ì†Œë‚˜ ì—…ë°ì´íŠ¸", "ğŸ”¬ ì‚¬ìš©ì ì„¸ë¶„í™”"] },
  { day: 6, category: "ì½˜í…ì¸  ê¸°íš ë° ì œì‘", tasks: ["ğŸ¨ ìº í˜ì¸ ì£¼ì œ/ëª©í‘œ ì„¤ì •", "ğŸ’¡ ìŠ¬ë¡œê±´ ì•„ì´ë””ì–´ ë„ì¶œ"] },
  { day: 7, category: "ì½˜í…ì¸  ê¸°íš ë° ì œì‘", tasks: ["ğŸ§  ì½˜í…ì¸  ì•„ì´ë””ì–´ ë¸Œë ˆì¸ìŠ¤í† ë°", "ğŸ“š ë‚´ìš© ë¶„ë¥˜ (SNS, ì´ë©”ì¼ ë“±)"] },
  { day: 8, category: "ì½˜í…ì¸  ê¸°íš ë° ì œì‘", tasks: ["ğŸ“… ìº˜ë¦°ë”ì— ì½˜í…ì¸  ë°°ì¹˜", "ğŸ› ï¸ ì½˜í…ì¸  ì œì‘ ì¼ì • í™•ì •"] },
  { day: 9, category: "ì½˜í…ì¸  ê¸°íš ë° ì œì‘", tasks: ["âœï¸ ë¸”ë¡œê·¸ ì½˜í…ì¸  ì´ˆì•ˆ ì‘ì„±", "ğŸ” í‚¤ì›Œë“œ í¬í•¨ ì—¬ë¶€ ì ê²€"] },
  { day: 10, category: "ì½˜í…ì¸  ê¸°íš ë° ì œì‘", tasks: ["ğŸ–¼ï¸ SNS ì½˜í…ì¸  ë””ìì¸ ì œì‘", "ğŸ“ í¬ë§·ë³„ ì´ë¯¸ì§€ ì¤€ë¹„"] },
  { day: 11, category: "ì½˜í…ì¸  ê¸°íš ë° ì œì‘", tasks: ["ğŸª§ ê´‘ê³  ì†Œì¬ ì œì‘", "ğŸ§ª A/B í…ŒìŠ¤íŠ¸ìš© ë°°ë„ˆ 2ì¢…"] },
  { day: 12, category: "ì½˜í…ì¸  ê¸°íš ë° ì œì‘", tasks: ["ğŸ“¬ ì´ë©”ì¼ í…œí”Œë¦¿ ë””ìì¸", "ğŸ¯ CTA ë²„íŠ¼ ë¬¸êµ¬ ê²°ì •"] },
  { day: 13, category: "ì½˜í…ì¸  ê¸°íš ë° ì œì‘", tasks: ["ğŸ§± ëœë”© í˜ì´ì§€ êµ¬ì¡° ê¸°íš", "ğŸ“‹ ì´ˆì•ˆ í”¼ë“œë°± ìˆ˜ë ´"] },
  { day: 14, category: "ì½˜í…ì¸  ê¸°íš ë° ì œì‘", tasks: ["ğŸ§ ëª¨ë“  ì½˜í…ì¸  ìµœì¢… ê²€í† ", "âœ… ì˜¤ë¥˜ ë° ì˜¤íƒ€ ìˆ˜ì •"] },
  { day: 15, category: "ìº í˜ì¸ ì‹¤í–‰", tasks: ["ğŸš€ ì½˜í…ì¸  ë°œí–‰ ì‹œì‘", "ğŸ“¢ SNS ì˜ˆì•½ ê²Œì‹œ ì„¤ì •"] },
  { day: 16, category: "ìº í˜ì¸ ì‹¤í–‰", tasks: ["ğŸ“Š ê´‘ê³  ìº í˜ì¸ ì„¸íŒ…", "ğŸ› ï¸ íƒ€ê²ŸíŒ… ì„¸ë¶€ ì„¤ì •"] },
  { day: 17, category: "ìº í˜ì¸ ì‹¤í–‰", tasks: ["ğŸ’° ê´‘ê³  ì˜ˆì‚° ë°°ë¶„", "ğŸ“… ì¼ì • ì¬í™•ì¸"] },
  { day: 18, category: "ì„±ê³¼ ì¸¡ì • ë° ë¶„ì„", tasks: ["ğŸ•µï¸â€â™‚ï¸ ì„±ê³¼ ëª¨ë‹ˆí„°ë§ ë°©ë²• ì„¤ì •", "ğŸ“ˆ ì‹¤ì‹œê°„ ë°ì´í„° ëŒ€ì‹œë³´ë“œ êµ¬ì¶•"] },
  { day: 19, category: "ì„±ê³¼ ì¸¡ì • ë° ë¶„ì„", tasks: ["ğŸ“ ì£¼ê°„ ë¦¬í¬íŠ¸ í…œí”Œë¦¿ ì œì‘", "ğŸ“¤ ìë™ ë°œì†¡ ì‹œìŠ¤í…œ ì ê²€"] },
  { day: 20, category: "ì„±ê³¼ ì¸¡ì • ë° ë¶„ì„", tasks: ["ğŸ‘¥ ê³ ê° í”¼ë“œë°± ìˆ˜ì§‘ ê³„íš", "ğŸ“ ì¸í„°ë·° ëŒ€ìƒ ì„ ì •"] },
  { day: 21, category: "ì½˜í…ì¸  í™•ì¥ ë° ìµœì í™”", tasks: ["ğŸ¥ í”„ë¡œëª¨ì…˜ ì˜ìƒ ê¸°íš", "ğŸ¬ ì´¬ì˜ ì¼ì • ì¡°ìœ¨"] },
  { day: 22, category: "ì½˜í…ì¸  í™•ì¥ ë° ìµœì í™”", tasks: ["ğŸ“º ì˜ìƒ í¸ì§‘", "ğŸ¨ ì¸ë„¤ì¼ ì œì‘"] },
  { day: 23, category: "ì½˜í…ì¸  í™•ì¥ ë° ìµœì í™”", tasks: ["ğŸ—£ï¸ ì¸í”Œë£¨ì–¸ì„œ í˜‘ì—… ê²€í† ", "ğŸ¤ ê³„ì•½ ì¡°ê±´ í˜‘ìƒ"] },
  { day: 24, category: "ê³ ê° ì»¤ë®¤ë‹ˆì¼€ì´ì…˜", tasks: ["ğŸ’¬ SNS ëŒ“ê¸€ ë° ë¬¸ì˜ ëŒ€ì‘", "ğŸ“ ê³ ê° ìƒë‹´ í”„ë¡œì„¸ìŠ¤ ì ê²€"] },
  { day: 25, category: "ê°œì„  ë° ë°˜ë³µ", tasks: ["ğŸ’¡ ê°œì„  ì•„ì´ë””ì–´ ë„ì¶œ íšŒì˜", "ğŸ“ ì‹¤í–‰ ê³„íš ìˆ˜ë¦½"] },
  { day: 26, category: "ê°œì„  ë° ë°˜ë³µ", tasks: ["ğŸ“¢ ë¦¬íƒ€ê²ŸíŒ… ìº í˜ì¸ ì‹œì‘", "ğŸ”„ ê´‘ê³  ì†Œì¬ êµì²´"] },
  { day: 27, category: "ê°œì„  ë° ë°˜ë³µ", tasks: ["ğŸ“Š ìº í˜ì¸ ì„±ê³¼ ë¶„ì„", "ğŸ“ˆ ë³´ê³ ì„œ ì‘ì„±"] },
  { day: 28, category: "ë°ì´í„° ê´€ë¦¬ ë° ì •ë¦¬", tasks: ["ğŸ§¹ ë°ì´í„° ì •ë¦¬ ë° ë°±ì—…", "ğŸ“‚ íŒŒì¼ ì•„ì¹´ì´ë¸Œ ì™„ë£Œ"] },
  { day: 29, category: "ì„±ê³¼ ê³µìœ  ë° ë‹¤ìŒ ìŠ¤í…", tasks: ["ğŸ‰ ì„±ê³µ ì‚¬ë¡€ ê³µìœ ", "ğŸ‘ íŒ€ì› í”¼ë“œë°± ìˆ˜ì§‘"] },
  { day: 30, category: "ì„±ê³¼ ê³µìœ  ë° ë‹¤ìŒ ìŠ¤í…", tasks: ["ğŸ”” ë‹¤ìŒ ë‹¬ ì¤€ë¹„ ì‹œì‘", "ğŸ“… ì¼ì • ê³„íš ìˆ˜ë¦½"] }
];



// DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
const checklist = document.getElementById("checklist");
const checklistWrapper = document.getElementById("checklist-wrapper");
const progressText = document.getElementById("progress-text");
const progressBarFill = document.getElementById("progress-bar-fill");
const resetBtn = document.getElementById("reset-btn");
const printPdfBtn = document.getElementById("print-pdf-btn");
const diagnosisResult = document.getElementById("diagnosis-result");
const summaryText = document.getElementById("summary");
const completedTasksList = document.getElementById("completed-tasks-list");
const showResultBtn = document.getElementById("show-result-btn");
const printResultBtn = document.getElementById("print-result-btn");
const circularProgressValue = document.getElementById("circular-progress-value");
const circularFg = document.querySelector(".circular-fg");
const scrollLeftBtn = document.getElementById("scroll-left-btn");
const scrollRightBtn = document.getElementById("scroll-right-btn");


// ì›í˜• ì§„í–‰ë¥  ê³„ì‚°ì„ ìœ„í•œ ìƒìˆ˜
const CIRCUMFERENCE = 2 * Math.PI * 40; // SVG ì›ì˜ ë°˜ì§€ë¦„ (r=40px)ì— ë”°ë¼ ë‘˜ë ˆ ê³„ì‚°

// ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤
const STORAGE_KEY = "marketingChecklistState";
// ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì €ì¥ëœ ìƒíƒœ ë¶ˆëŸ¬ì˜¤ê¸° ë˜ëŠ” ì´ˆê¸°í™”
let checklistState = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};

// ë“œë˜ê·¸ ê´€ë ¨ ë³€ìˆ˜
let isDragging = false;
let startX;
let scrollLeft;

// ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒíƒœë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜
function saveState() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(checklistState));
}

// ì›í˜• ì§„í–‰ë¥ ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
function updateCircularProgress(percent) {
  if (circularProgressValue) {
    circularProgressValue.textContent = percent + "%";
  }
  if (circularFg) {
    const offset = CIRCUMFERENCE * (1 - percent / 100);
    // ë°˜ë“œì‹œ ë‘˜ë ˆ ë‘ ë²ˆ ë°˜ë³µ!
    circularFg.style.strokeDasharray = `${CIRCUMFERENCE} ${CIRCUMFERENCE}`;
    circularFg.style.strokeDashoffset = offset;
  }
}

// ì „ì²´ ì§„í–‰ë¥ ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
function updateOverallProgress() {
  const totalTasks = checklistData.reduce((acc, day) => acc + day.tasks.length, 0);
  const doneTasks = Object.values(checklistState).filter(v => v).length;
  const percent = totalTasks ? Math.round((doneTasks / totalTasks) * 100) : 0;
  progressText.textContent = `ì „ì²´ ì§„í–‰ë¥ : ${percent}%`;
  progressBarFill.style.width = percent + "%";
  updateCircularProgress(percent); // ì›í˜• ì§„í–‰ë¥ ë„ ì—…ë°ì´íŠ¸
}

// ê° Day ì„¹ì…˜ì˜ ì§„í–‰ë¥ ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
function updateDayProgress(day) {
  day = Number(day);
  const daySection = document.getElementById(`day-${day}`);
  const dayObj = checklistData.find(d => Number(d.day) === day);
  if (!daySection || !dayObj) return; // ìš”ì†Œë‚˜ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì¢…ë£Œ

  const tasks = dayObj.tasks;
  let doneCount = 0;
  for (let i = 0; i < tasks.length; i++) {
    const key = `day${day}-task${i}`;
    if (checklistState[key]) doneCount++; // ì™„ë£Œëœ íƒœìŠ¤í¬ ì¹´ìš´íŠ¸
  }
  const percent = tasks.length ? Math.round((doneCount / tasks.length) * 100) : 0;

  // í¼ì„¼íŠ¸ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
  const progressTextElement = daySection.querySelector(".day-progress-text");
  if (progressTextElement) progressTextElement.textContent = `${percent}% ì™„ë£Œ`;
  // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì—…ë°ì´íŠ¸
  const progressBarFillElement = daySection.querySelector(".day-progress-bar-fill");
  if (progressBarFillElement) progressBarFillElement.style.width = percent + "%";
}

// ì¹´í…Œê³ ë¦¬ ì™„ë£Œ ì—¬ë¶€ í™•ì¸ ë° ë‹¤ìŒ ì¹´í…Œê³ ë¦¬ë¡œ ìŠ¤í¬ë¡¤í•˜ëŠ” í•¨ìˆ˜
function checkCategoryCompletionAndScroll(updatedDay) {
    const dayItem = checklistData.find(d => d.day === updatedDay);
    if (!dayItem) return;

    const categoryName = dayItem.category;
    const daysInThisCategory = checklistData.filter(d => d.category === categoryName);

    let allTasksInCategoriesCompleted = true;
    for (const dayObj of daysInThisCategory) {
        for (let i = 0; i < dayObj.tasks.length; i++) {
            const key = `day${dayObj.day}-task${i}`;
            if (!checklistState[key]) {
                allTasksInCategoriesCompleted = false;
                break;
            }
        }
        if (!allTasksInCategoriesCompleted) break;
    }

    if (allTasksInCategoriesCompleted) {
        const currentCategoryBoxId = `category-header-${categoryName.replace(/\s/g, '-')}`;
        const currentCategoryBox = document.getElementById(currentCategoryBoxId).parentNode;
        const nextCategoryBox = currentCategoryBox.nextElementSibling;

        if (nextCategoryBox && nextCategoryBox.classList.contains('category-box')) {
            checklist.scrollTo({
                left: nextCategoryBox.offsetLeft - checklist.offsetLeft, // ë‹¤ìŒ ì¹´ë“œì˜ ì‹œì‘ ìœ„ì¹˜ë¡œ ìŠ¤í¬ë¡¤
                behavior: 'smooth'
            });
        }
    }
}

// í™”ì‚´í‘œ ë²„íŠ¼ ê°€ì‹œì„± ì—…ë°ì´íŠ¸ í•¨ìˆ˜
function updateArrowButtonVisibility() {
    const maxScrollLeft = checklist.scrollWidth - checklist.clientWidth;

    if (checklist.scrollLeft <= 5) { // ê±°ì˜ ë§¨ ì™¼ìª½ì¼ ë•Œ
        scrollLeftBtn.classList.add('hidden');
    } else {
        scrollLeftBtn.classList.remove('hidden');
    }

    if (checklist.scrollLeft >= maxScrollLeft - 5) { // ê±°ì˜ ë§¨ ì˜¤ë¥¸ìª½ì¼ ë•Œ
        scrollRightBtn.classList.add('hidden');
    } else {
        scrollRightBtn.classList.remove('hidden');
    }
}

// í™”ì‚´í‘œ ë²„íŠ¼ ìˆ˜ì§ ìœ„ì¹˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ìŠ¤í¬ë¡¤ì— ë”°ë¼ ì›€ì§ì´ë„ë¡)
function updateArrowVerticalPosition() {
    const checklistRect = checklist.getBoundingClientRect(); // checklist ìš”ì†Œì˜ ìœ„ì¹˜ì™€ í¬ê¸°
    const arrowHeight = scrollLeftBtn.offsetHeight; // í™”ì‚´í‘œ ë²„íŠ¼ì˜ ë†’ì´

    // checklist ì»¨í…Œì´ë„ˆì˜ ë³´ì´ëŠ” ë¶€ë¶„ì˜ ì„¸ë¡œ ì¤‘ì•™ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
    // viewport ê¸°ì¤€ checklist ì»¨í…Œì´ë„ˆì˜ ìƒë‹¨ + (checklist ì»¨í…Œì´ë„ˆì˜ ë†’ì´ / 2) - (í™”ì‚´í‘œ ë†’ì´ / 2)
    let targetTop = checklistRect.top + (checklistRect.height / 2) - (arrowHeight / 2);

    // ê³ ì • í—¤ë”ì˜ ë†’ì´ë¥¼ ê³ ë ¤í•˜ì—¬ í™”ì‚´í‘œê°€ í—¤ë”ì— ê°€ë ¤ì§€ì§€ ì•Šë„ë¡ ì¡°ì •
    const headerHeight = document.getElementById('header-title-fixed').offsetHeight;
    if (targetTop < headerHeight + 10) { // í—¤ë” ì•„ë˜ 10px ì—¬ë°±
        targetTop = headerHeight + 10;
    }

    // í™”ë©´ í•˜ë‹¨ì— ë„ˆë¬´ ê°€ê¹ê²Œ ë¶™ì§€ ì•Šë„ë¡ ì¡°ì •
    if (targetTop > window.innerHeight - arrowHeight - 20) { // í•˜ë‹¨ 20px ì—¬ë°±
        targetTop = window.innerHeight - arrowHeight - 20;
    }

    // ê³„ì‚°ëœ top ìœ„ì¹˜ë¥¼ í™”ì‚´í‘œ ë²„íŠ¼ì— ì ìš©
    scrollLeftBtn.style.top = `${targetTop}px`;
    scrollRightBtn.style.top = `${targetTop}px`;
}


// í™”ì‚´í‘œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
scrollLeftBtn.addEventListener('click', () => {
    const currentScrollLeft = checklist.scrollLeft;
    let targetScrollLeft = currentScrollLeft;
    const categoryBoxes = checklist.querySelectorAll('.category-box');

    // í˜„ì¬ ë³´ì´ëŠ” ì¹´ë“œë³´ë‹¤ ì™¼ìª½ìœ¼ë¡œ ì´ë™í•  ì¹´ë“œ ì°¾ê¸°
    for (let i = categoryBoxes.length - 1; i >= 0; i--) {
        const box = categoryBoxes[i];
        if (box.offsetLeft < currentScrollLeft - 10) { // í˜„ì¬ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë³´ë‹¤ ì™¼ìª½ì— ìˆëŠ” ì¹´ë“œ
            targetScrollLeft = box.offsetLeft - 20; // 20px ì—¬ë°± ì¶”ê°€
            break;
        }
        if (i === 0) { // ì²«ë²ˆì§¸ ì¹´ë“œì¸ ê²½ìš° ë§¨ ì™¼ìª½ìœ¼ë¡œ
            targetScrollLeft = 0;
        }
    }
    checklist.scrollTo({
        left: targetScrollLeft,
        behavior: 'smooth'
    });
});

scrollRightBtn.addEventListener('click', () => {
    const currentScrollLeft = checklist.scrollLeft;
    let targetScrollLeft = currentScrollLeft;
    const categoryBoxes = checklist.querySelectorAll('.category-box');

    // í˜„ì¬ ë³´ì´ëŠ” ì¹´ë“œë³´ë‹¤ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•  ì¹´ë“œ ì°¾ê¸°
    for (let i = 0; i < categoryBoxes.length; i++) {
        const box = categoryBoxes[i];
        // í˜„ì¬ ë³´ì´ëŠ” ì˜ì—­ì˜ ì˜¤ë¥¸ìª½ ê²½ê³„ë³´ë‹¤ ë‹¤ìŒ ë°•ìŠ¤ê°€ ì‹œì‘ë  ë•Œ
        if (box.offsetLeft > currentScrollLeft + checklist.clientWidth - 10) {
            targetScrollLeft = box.offsetLeft;
            // ëª¨ë°”ì¼ ë·°í¬íŠ¸ì—ì„œ í•œ ì¹¸ì”© ì´ë™í•˜ë„ë¡ ì¡°ì •
            if (window.innerWidth <= 768) {
                targetScrollLeft -= 10; // ëª¨ë°”ì¼ ì¢Œì¸¡ íŒ¨ë”©
            }
            break;
        }
        if (i === categoryBoxes.length - 1) { // ë§ˆì§€ë§‰ ì¹´ë“œì¸ ê²½ìš° ë§¨ ì˜¤ë¥¸ìª½ìœ¼ë¡œ
            targetScrollLeft = checklist.scrollWidth - checklist.clientWidth;
        }
    }
    checklist.scrollTo({
        left: targetScrollLeft,
        behavior: 'smooth'
    });
});

// ë“œë˜ê·¸ ê¸°ëŠ¥ êµ¬í˜„
checklist.addEventListener('mousedown', (e) => {
  isDragging = true;
  checklist.classList.add('grabbing');
  startX = e.pageX - checklist.offsetLeft;
  scrollLeft = checklist.scrollLeft;
  // ë“œë˜ê·¸ ì¤‘ í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì§€
  e.preventDefault();
});

checklist.addEventListener('mouseleave', () => {
  isDragging = false;
  checklist.classList.remove('grabbing');
});

checklist.addEventListener('mouseup', () => {
  isDragging = false;
  checklist.classList.remove('grabbing');
});

checklist.addEventListener('mousemove', (e) => {
  if (!isDragging) return;
  e.preventDefault(); // ê¸°ë³¸ ë“œë˜ê·¸ ë™ì‘(ìŠ¤í¬ë¡¤) ë°©ì§€
  const x = e.pageX - checklist.offsetLeft;
  const walk = (x - startX); // ì´ë™ ê±°ë¦¬
  checklist.scrollLeft = scrollLeft - walk; // ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
});

// í„°ì¹˜ ì´ë²¤íŠ¸ (ëª¨ë°”ì¼ ë“œë˜ê·¸/ìŠ¤ì™€ì´í”„)
checklist.addEventListener('touchstart', (e) => {
    isDragging = true;
    checklist.classList.add('grabbing');
    startX = e.touches[0].pageX - checklist.offsetLeft;
    scrollLeft = checklist.scrollLeft;
});

checklist.addEventListener('touchend', () => {
    isDragging = false;
    checklist.classList.remove('grabbing');
});

checklist.addEventListener('touchmove', (e) => {
    if (!isDragging) return;
    const x = e.touches[0].pageX - checklist.offsetLeft;
    const walk = (x - startX);
    checklist.scrollLeft = scrollLeft - walk;
});


// ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (í™”ì‚´í‘œ ê°€ì‹œì„± ì—…ë°ì´íŠ¸)
checklist.addEventListener('scroll', updateArrowButtonVisibility);



// ì²´í¬ë¦¬ìŠ¤íŠ¸ UIë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
function buildChecklist() {
  checklist.innerHTML = ""; // ê¸°ì¡´ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™”

  // ë°ì´í„°ë¥¼ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ê·¸ë£¹í™”
  const categories = {};
  checklistData.forEach(item => {
    if (!categories[item.category]) {
      categories[item.category] = [];
    }
    categories[item.category].push(item);
  });

  // ê·¸ë£¹í™”ëœ ì¹´í…Œê³ ë¦¬ë³„ë¡œ UI ìƒì„±
  for (const categoryName in categories) {
    const categoryBox = document.createElement("div");
    categoryBox.className = "category-box";
    categoryBox.setAttribute("aria-labelledby", `category-header-${categoryName.replace(/\s/g, '-')}`);

    const categoryHeader = document.createElement("h2");
    categoryHeader.id = `category-header-${categoryName.replace(/\s/g, '-')}`;
    
    // ì¹´í…Œê³ ë¦¬ë³„ Material Icons ì„¤ì •
    let icon = '';
    switch (categoryName) {
      case 'ì „ëµ ìˆ˜ë¦½ ë° ì‹œì¥ ë¶„ì„': icon = 'insights'; break;
      case 'ì½˜í…ì¸  ê¸°íš ë° ì œì‘': icon = 'edit'; break;
      case 'ìº í˜ì¸ ì‹¤í–‰': icon = 'rocket_launch'; break;
      case 'ì„±ê³¼ ì¸¡ì • ë° ë¶„ì„': icon = 'analytics'; break;
      case 'ì½˜í…ì¸  í™•ì¥ ë° ìµœì í™”': icon = 'auto_awesome'; break;
      case 'ê³ ê° ì»¤ë®¤ë‹ˆì¼€ì´ì…˜': icon = 'chat'; break;
      case 'ê°œì„  ë° ë°˜ë³µ': icon = 'loop'; break;
      case 'ë°ì´í„° ê´€ë¦¬ ë° ì •ë¦¬': icon = 'folder_open'; break;
      case 'ì„±ê³¼ ê³µìœ  ë° ë‹¤ìŒ ìŠ¤í…': icon = 'celebration'; break;
      default: icon = 'category';
    }
    categoryHeader.innerHTML = `<span class="material-icons">${icon}</span> ${categoryName}`;
    
    categoryBox.appendChild(categoryHeader);

    // ê° ì¹´í…Œê³ ë¦¬ ë‚´ì˜ Day ì„¹ì…˜ë“¤ ì¶”ê°€
    categories[categoryName].forEach(({ day, tasks }) => {
      day = Number(day);

      const daySection = document.createElement("section");
      daySection.className = "day-section";
      daySection.id = `day-${day}`;
      daySection.setAttribute("aria-labelledby", `day-header-${day}`);

      // Day í—¤ë” (Day ìˆ«ì + ì˜¤ë¥¸ìª½ ì§„í–‰ë¥  í…ìŠ¤íŠ¸)
      const dayHeader = document.createElement("h3");
      dayHeader.id = `day-header-${day}`;
      dayHeader.style.display = "flex";
      dayHeader.style.justifyContent = "space-between";
      dayHeader.style.alignItems = "center";

      const dayTitle = document.createElement("span");
      dayTitle.textContent = `ğŸ“… Day ${day}`;

      const dayProgressText = document.createElement("span");
      dayProgressText.className = "day-progress-text";
      dayProgressText.textContent = "0% ì™„ë£Œ";

      dayHeader.appendChild(dayTitle);
      dayHeader.appendChild(dayProgressText);

      // Day ì§„í–‰ë¥  ë°”
      const dayProgressBarBg = document.createElement("div");
      dayProgressBarBg.className = "day-progress-bar-bg";
      const dayProgressBarFill = document.createElement("div");
      dayProgressBarFill.className = "day-progress-bar-fill";
      dayProgressBarFill.style.width = "0%";
      dayProgressBarBg.appendChild(dayProgressBarFill);

      daySection.appendChild(dayHeader);
      daySection.appendChild(dayProgressBarBg);

      const ul = document.createElement("ul");

      // ê° íƒœìŠ¤í¬ í•­ëª© ì¶”ê°€
      tasks.forEach((task, i) => {
        const li = document.createElement("li");
        const label = document.createElement("label");
        label.setAttribute("for", `day${day}-task${i}`);

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = `day${day}-task${i}`;
        checkbox.checked = !!checklistState[`day${day}-task${i}`]; // ì €ì¥ëœ ìƒíƒœ ì ìš©

        const taskTextSpan = document.createElement("span"); // íƒœìŠ¤í¬ í…ìŠ¤íŠ¸ë¥¼ ë‹´ì„ span
        taskTextSpan.textContent = task;

        if (checkbox.checked) {
          label.classList.add("checked"); // ì²´í¬ëœ í•­ëª© ìŠ¤íƒ€ì¼ ì ìš©
        }

        // ì²´í¬ë°•ìŠ¤ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        checkbox.addEventListener("change", function() {
          checklistState[checkbox.id] = checkbox.checked; // ìƒíƒœ ì—…ë°ì´íŠ¸
          saveState(); // ìƒíƒœ ì €ì¥

          if (checkbox.checked) {
            label.classList.add("checked");
          } else {
            label.classList.remove("checked");
          }

          updateDayProgress(day); // Day ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
          updateOverallProgress(); // ì „ì²´ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
          checkCategoryCompletionAndScroll(day); // ì¹´í…Œê³ ë¦¬ ì™„ë£Œ ì—¬ë¶€ í™•ì¸ ë° ìŠ¤í¬ë¡¤
        });

        label.appendChild(checkbox);
        label.appendChild(taskTextSpan); // íƒœìŠ¤í¬ í…ìŠ¤íŠ¸ span ì¶”ê°€
        li.appendChild(label);
        ul.appendChild(li);
      });

      daySection.appendChild(ul);
      categoryBox.appendChild(daySection); // Day ì„¹ì…˜ì„ ì¹´í…Œê³ ë¦¬ ë°•ìŠ¤ì— ì¶”ê°€
      updateDayProgress(day); // Day ì§„í–‰ë¥  ì´ˆê¸° ì—…ë°ì´íŠ¸
    });
    checklist.appendChild(categoryBox); // ì¹´í…Œê³ ë¦¬ ë°•ìŠ¤ë¥¼ ì „ì²´ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆì— ì¶”ê°€
  }
}

// 'ì „ì²´ ì²´í¬ ì´ˆê¸°í™”' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
resetBtn.addEventListener("click", () => {
  if (confirm("ëª¨ë“  ì²´í¬ í•­ëª©ì„ ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
    checklistState = {}; // ìƒíƒœ ì´ˆê¸°í™”
    saveState(); // ì €ì¥
    buildChecklist(); // UI ë‹¤ì‹œ ê·¸ë¦¬ê¸°
    updateOverallProgress(); // ì „ì²´ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
    diagnosisResult.style.display = "none"; // ì§„ë‹¨ ê²°ê³¼ ìˆ¨ê¹€
    printResultBtn.style.display = "none"; // ì§„ë‹¨ ê²°ê³¼ ì¸ì‡„ ë²„íŠ¼ ìˆ¨ê¹€
    checklist.scrollTo({ left: 0, behavior: 'smooth' }); // ì¹´ë“œ ê°€ë¡œ ìŠ¤í¬ë¡¤ ë§¨ ì•ìœ¼ë¡œ

    // **window ìŠ¤í¬ë¡¤ì„ ì•½ê°„ ë”œë ˆì´ í›„ ì‹¤í–‰**
    setTimeout(() => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }, 80); // 80ms ì •ë„ë©´ ì¶©ë¶„
  }
});


// 'ì¸ì‡„ / PDF ì €ì¥' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ (ì²´í¬ë¦¬ìŠ¤íŠ¸ ì „ì²´ ì¸ì‡„)
printPdfBtn.addEventListener("click", () => {
  document.body.classList.remove("printing-result"); // ê²°ê³¼ë§Œ ì¸ì‡„ ëª¨ë“œ í•´ì œ
  window.print(); // ì¸ì‡„ ë‹¤ì´ì–¼ë¡œê·¸ í˜¸ì¶œ
});

// 'ì§„ë‹¨ ê²°ê³¼ ë³´ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
showResultBtn.addEventListener("click", () => {
  const completedTasks = [];
  checklistData.forEach(({ category, day, tasks }) => {
    tasks.forEach((task, i) => {
      const key = `day${day}-task${i}`;
      if (checklistState[key]) {
        completedTasks.push(`[${category}] Day ${day}: ${task}`); // ì™„ë£Œëœ í•­ëª© ëª©ë¡ ìƒì„±
      }
    });
  });

  const totalTasks = checklistData.reduce((acc, day) => acc + day.tasks.length, 0);
  const doneTasks = Object.values(checklistState).filter(v => v).length;
  const percent = totalTasks ? Math.round((doneTasks / totalTasks) * 100) : 0;

  summaryText.textContent = `ì´ ${totalTasks}ê°œ ì¤‘ ${doneTasks}ê°œ ì™„ë£Œ (${percent}%)`; // ìš”ì•½ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸

  completedTasksList.innerHTML = ""; // ê¸°ì¡´ ëª©ë¡ ì´ˆê¸°í™”
  if (completedTasks.length === 0) {
    completedTasksList.innerHTML = "<li>ì•„ì§ ì™„ë£Œëœ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</li>";
  } else {
    completedTasks.forEach(task => {
      const li = document.createElement("li");
      li.textContent = task;
      completedTasksList.appendChild(li); // ëª©ë¡ì— ì¶”ê°€
    });
  }

  diagnosisResult.style.display = "block"; // ì§„ë‹¨ ê²°ê³¼ í‘œì‹œ
  printResultBtn.style.display = "inline-block"; // ì§„ë‹¨ ê²°ê³¼ ì¸ì‡„ ë²„íŠ¼ í‘œì‹œ
  diagnosisResult.scrollIntoView({ behavior: "smooth" }); // ê²°ê³¼ ì˜ì—­ìœ¼ë¡œ ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤
});

// 'ì§„ë‹¨ ê²°ê³¼ë§Œ ì¸ì‡„/PDF' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
printResultBtn.addEventListener("click", function() {
  document.body.classList.add("printing-result"); // ê²°ê³¼ë§Œ ì¸ì‡„ ëª¨ë“œ ì„¤ì •
  window.print(); // ì¸ì‡„ ë‹¤ì´ì–¼ë¡œê·¸ í˜¸ì¶œ
  // ì¸ì‡„ê°€ ì™„ë£Œë˜ë©´ í´ë˜ìŠ¤ ì œê±° (ì¸ì‡„ í›„ ì›ë˜ ìŠ¤íƒ€ì¼ë¡œ ëŒì•„ì˜¤ë„ë¡)
  setTimeout(() => {
    document.body.classList.remove("printing-result");
  }, 1000);
});

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë¹Œë“œ ë° ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
buildChecklist();
updateOverallProgress();
// ì´ˆê¸° í™”ì‚´í‘œ ë²„íŠ¼ ê°€ì‹œì„± ì„¤ì • ë° ìœ„ì¹˜ ì—…ë°ì´íŠ¸
updateArrowButtonVisibility();

//ì–‘í™”ì‚´í‘œ ë”°ë¼ì˜¤ê¸°

let currentTranslateY = 0;

function lerp(start, end, t) {
  return start * (1 - t) + end * t;
}

function update() {
  const scrollY = window.scrollY || window.pageYOffset;
  const docHeight = document.documentElement.scrollHeight - window.innerHeight;
  const scrollRatio = docHeight > 0 ? scrollY / docHeight : 0;
  const moveRange = window.innerHeight * 0.6; // 0.6~0.7 ì •ë„ê°€ ì ë‹¹

  const targetTranslateY = (scrollRatio - 0.5) * moveRange;

  // ë¶€ë“œëŸ½ê²Œ ë”°ë¼ì˜¤ê²Œ ë³´ê°„
  currentTranslateY = lerp(currentTranslateY, targetTranslateY, 0.13);

  document.querySelectorAll('.scroll-button').forEach(btn => {
   
  });

  requestAnimationFrame(update);
}

requestAnimationFrame(update);

const currentUrl = window.location.href;
const pageTitle = document.title;


// ì¹´ì¹´ì˜¤í†¡ ê³µìœ  (ëª¨ë°”ì¼ì—ì„œë§Œ ë™ì‘, PCì—ì„œëŠ” ì•ˆë‚´)
document.getElementById('btn-kakaotalk').onclick = function(e) {
  e.preventDefault();
  const kakaoUrl = `kakao://send?text=${encodeURIComponent(pageTitle)}%0A${encodeURIComponent(currentUrl)}`;
  if (/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
    window.location.href = kakaoUrl;
  } else {
    alert('ì¹´ì¹´ì˜¤í†¡ ê³µìœ ëŠ” ëª¨ë°”ì¼ì—ì„œë§Œ ì§€ì›ë©ë‹ˆë‹¤.');
  }
};

// Web Share API (ì§€ì› ë¸Œë¼ìš°ì €)
document.getElementById('btn-webshare').onclick = function() {
  if (navigator.share) {
    navigator.share({
      title: pageTitle,
      url: currentUrl
    }).catch(() => {});
  } else {
    // ì§€ì› ì•ˆ í•˜ë©´ ë§í¬ ë³µì‚¬ ì•ˆë‚´
    if (navigator.clipboard) {
      navigator.clipboard.writeText(currentUrl);
      alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
    } else {
      prompt('ì•„ë˜ ë§í¬ë¥¼ ë³µì‚¬í•˜ì„¸ìš”', currentUrl);
    }
  }
};

document.getElementById('btn-download').onclick = function() {
  const source = document.documentElement.outerHTML;
  const blob = new Blob([source], {type: "text/html"});
  const url = URL.createObjectURL(blob);

  const anchor = document.createElement('a');
  anchor.href = url;
  anchor.download = 'ë§ˆì¼€íŒ…_30ì¼_ì²´í¬ë¦¬ìŠ¤íŠ¸.html';
  document.body.appendChild(anchor);
  anchor.click();
  document.body.removeChild(anchor);
  URL.revokeObjectURL(url);
};



</script>
</body>
</html>
